---
marp: true
---

# Q13. Visitor Pattern

---

## Question 1

To define new operations without changing the classes of the elements on which they operate, by separating algorithms from the object structure.  

What pattern explains this idea?

---

**Answer:**  


---

## Question 2

It allows you to **add new operations** to existing class hierarchies **without modifying** those classes, especially when the operations don't belong naturally to the classes.

What pattern solves this problem?

---

**Answer:**


---

## Question 3

This is a list of the main participants in the **Visitor pattern**.  
Which one is **wrong**?

1. **Visitor** - interface declaring visit methods for each ConcreteElement
2. **ConcreteVisitor** - implements specific operations for each element type  
3. **Element** - interface defining accept method that takes a visitor
4. **ConcreteElement** - implements accept method by calling visitor's visit method
5. **ObjectStructure** - collection of elements that can be visited
6. **Director** — manages the visit

---

**Answer:**


---

## Question 4

Complete the Visitor pattern for a document structure:

```python
class DocumentElement:
    def ???(self, visitor):
        pass

class Paragraph(??):
    def __init__(self, text):
        self.text = text
    
    def ???(self, visitor):
        visitor.??(self)

class DocumentVisitor:  # ??
    def visit_paragraph(self, paragraph):
        pass
    def visit_image(self, image):
        pass
```

---

**Answer:**


---

## Question 5

**Double dispatch** means the actual method called depends on **both** the type of the element (first dispatch) and the type of the visitor (second dispatch). The element calls visitor.visit_X(self), where X depends on the element type.

What concept explains this idea?

---

**Answer:**


---

## Question 6

(T/F) Adding a new operation in Visitor pattern requires modifying existing element classes.

---

**Answer:**


---

## Question 7

This is a list of when we should use the **Visitor pattern**.  
Which one is **wrong**?

- When you need to perform operations across a **heterogeneous collection** of objects
- When operations **don't belong naturally** to the element classes
- When you need to **add new operations frequently** but element structure is stable
- When you want to **separate algorithms from data structures**
- When the **element classes change constantly**

---

**Answer:**


---

## Question 8

This is a list of the benefits of the **Visitor pattern**.  
Which one is **wrong**?

1. **Easy to add new operations** - just create new visitors
2. **Gathers related operations** - visitor contains all operations for one algorithm
3. **Can accumulate state** - visitor can maintain state during traversal
4. **Separates concerns** - algorithms separated from data structure
5. **Element classes never need modification** — adding new element

---

**Answer:**


---

## Question 9

This is a list of the drawbacks of the **Visitor pattern**.  
Which one is **wrong**?

1. **Hard to add new element types** - requires changing all visitors
2. **Breaks encapsulation** - visitors often need access to element internals
3. **Complex dependencies** - circular dependency between visitors and elements
4. **Limited by language features** - needs double dispatch support
5. **Prevents adding new operations** — making actions are hard  

---

**Answer:**


---

## Question 10

In a compiler's Abstract Syntax Tree (AST) that has a tree/recursive structure. What pattern would you use to generate code from AST?

---

**Answer:**


---

## Summary

We have 10 questions on this page.

1. How many questions did you answer? ( / 10)
2. What percentage of questions did you answer? (  %)
3. List question numbers that you cannot answer:
4. (Optional) Explain why you could not answer these questions.
